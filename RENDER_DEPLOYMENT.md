# 🚀 Render Deployment Guide - Asset Classification System

Complete guide to deploy your full-stack Asset Classification System on Render with one repository.

## 📋 Prerequisites

- GitHub repository with your complete project
- Render account (free at [render.com](https://render.com))

## 🏗️ Project Structure

Your project is perfectly structured for Render deployment:

```
asset-classification/
├── package.json              # Next.js frontend
├── src/                     # Frontend React code
├── api/                     # Django backend
│   ├── manage.py
│   ├── requirements.txt     # Python dependencies
│   └── assets_management/
├── render.yaml              # Render configuration
└── README.md
```

## 🚀 One-Click Deployment Steps

### Step 1: Push to GitHub
```bash
git add .
git commit -m "Ready for Render deployment"
git push origin main
```

### Step 2: Deploy on Render
1. Go to [render.com](https://render.com)
2. Click "New +" → "Blueprint"
3. Connect your GitHub repository
4. Render will automatically detect `render.yaml` and create:
   - ✅ Frontend service (Next.js)
   - ✅ Backend service (Django)
   - ✅ PostgreSQL database

### Step 3: Automatic Setup
Render will automatically:
- Install dependencies for both frontend and backend
- Set up PostgreSQL database
- Run migrations
- Seed initial data
- Deploy both services

## 🔧 Manual Setup (Alternative)

If you prefer manual control:

### Frontend Service
1. Create new "Static Site"
2. Connect GitHub repo
3. Settings:
   - **Build Command:** `npm install && npm run build`
   - **Publish Directory:** `out` (for static export) or `dist`

### Backend Service
1. Create new "Web Service"
2. Connect GitHub repo
3. Settings:
   - **Root Directory:** `api`
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `gunicorn assets_management.wsgi:application --bind 0.0.0.0:$PORT`

### Database
1. Create new "PostgreSQL"
2. Note the connection details

## 🌐 Environment Variables

Render will automatically set these, but you can customize:

### Backend Environment Variables
```bash
DJANGO_SETTINGS_MODULE=assets_management.deployment_settings
DEBUG=False
SECRET_KEY=<auto-generated>
DATABASE_URL=<auto-provided>
ALLOWED_HOSTS=*
RENDER_EXTERNAL_HOSTNAME=<your-app>.onrender.com
```

### Frontend Environment Variables
```bash
NODE_ENV=production
NEXT_PUBLIC_API_URL=https://<backend-service>.onrender.com
```

## 📊 Database Setup

After deployment, the system automatically:
1. ✅ Runs migrations
2. ✅ Seeds all data (23 departments, 68+ asset types)
3. ✅ Creates sample assets
4. ✅ Sets up assessment questions

Manual verification (if needed):
```bash
# Access Render shell for backend service
python manage.py migrate
python manage.py seed_all_data --clear
```

## 🔗 Your Deployed URLs

After successful deployment:
- **Frontend:** `https://asset-classification-frontend.onrender.com`
- **Backend API:** `https://asset-classification-backend.onrender.com`
- **Database:** Automatically connected

## 🧪 Testing Deployment

### Frontend Tests
1. Visit frontend URL
2. Check navigation works
3. Visit `/ml-training` - should show "API Online"
4. Visit `/classification/asset-form` - dropdowns should be populated

### Backend Tests
1. Visit `<backend-url>/api/departments/` - should show 23 departments
2. Visit `<backend-url>/api/asset-types/` - should show 68+ asset types
3. Visit `<backend-url>/api/assets/` - should show sample assets

### ML Training Tests
1. Upload a CSV file at `/ml-training`
2. Train models
3. Test predictions
4. Download reports

## 💰 Cost Breakdown

### Render Free Tier
- **Frontend:** Free static site hosting
- **Backend:** 750 hours/month free (enough for 24/7)
- **Database:** 1GB PostgreSQL free
- **Total Cost:** $0/month for personal projects

## 🔄 Auto-Deployment

Every push to GitHub main branch automatically:
1. ✅ Rebuilds frontend
2. ✅ Rebuilds backend
3. ✅ Runs migrations
4. ✅ Deploys updates
5. ✅ Zero downtime deployment

## 🛠️ Troubleshooting

### Common Issues

#### Build Failures
```bash
# Check build logs in Render dashboard
# Common fixes:
1. Ensure requirements.txt is in /api folder
2. Check Python version compatibility
3. Verify environment variables
```

#### Database Connection Issues
```bash
# Verify DATABASE_URL is set
# Check PostgreSQL service is running
# Ensure migrations completed
```

#### CORS Issues
```bash
# Update CORS_ALLOWED_ORIGINS in deployment_settings.py
# Add your frontend domain
```

### Logs and Monitoring
- **Real-time logs** available in Render dashboard
- **Automatic health checks** included
- **SSL certificates** auto-generated
- **Custom domains** supported (free)

## 🎯 Post-Deployment Setup

### 1. Custom Domain (Optional)
1. Go to frontend service settings
2. Add custom domain
3. Update DNS records

### 2. Environment Optimization
```bash
# Backend optimizations
SECURE_SSL_REDIRECT=True
SECURE_PROXY_SSL_HEADER=('HTTP_X_FORWARDED_PROTO', 'https')

# Frontend optimizations  
NEXT_PUBLIC_API_URL=https://your-custom-api-domain.com
```

### 3. Monitoring Setup
- Enable uptime monitoring
- Set up notification alerts
- Configure performance tracking

## ✨ Features Available After Deployment

### Complete Asset Management
- ✅ Asset creation with 23 departments
- ✅ 68+ professional asset types
- ✅ Standards-compliant risk assessment
- ✅ NIST/ISO framework compliance

### ML Training System
- ✅ CSV dataset upload
- ✅ Multi-model training (RF, SVM, DT)
- ✅ Real-time predictions
- ✅ Performance reporting

### Assessment System
- ✅ Questionnaire management
- ✅ NIST CSF alignment
- ✅ ISO 27001 controls

## 🎉 Success!

Your Asset Classification System is now:
- ✅ **Deployed** on professional infrastructure
- ✅ **Scalable** with automatic scaling
- ✅ **Secure** with HTTPS and security headers
- ✅ **Fast** with global CDN
- ✅ **Reliable** with 99.9% uptime

**URL:** `https://your-app.onrender.com`

Perfect for:
- 📚 **Academic research and thesis work**
- 💼 **Professional portfolios**
- 🏢 **Enterprise demonstrations**
- 🔬 **Standards compliance showcases**